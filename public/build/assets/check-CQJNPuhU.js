import{c as ie,j as t,L as le,H as ne}from"./app-DUSVlt4_.js";import{S as oe}from"./ShoppingListController-BjVYbz0_.js";import{c as ce,B as de}from"./app-logo-icon-DL6uu5NJ.js";import{c as me,C as xe,b as pe,a as he}from"./card-fV1JMGfy.js";import{s as re,A as ge}from"./app-layout-D6iWFSfB.js";import{C as te}from"./circle-check-DIAvn6Q3.js";import{A as fe}from"./arrow-left-DTZB2a7R.js";/* empty css            */import"./index-C4J_hXM0.js";import"./index-Ba9IFggz.js";import"./index-B82T-xMB.js";const ue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],be=ce("Circle",ue),je=[{title:"Daftar Belanja",href:re.check(1).url}];function Ee(a){const e=ie.c(116),{shoppingList:s,otherLists:O}=a;let o,c,r,d,m,x,b,p,i;if(e[0]!==s.id||e[1]!==s.items||e[2]!==s.shopping_date||e[3]!==s.store.name||e[4]!==s.title||e[5]!==O){const se=O===void 0?[]:O,ae=Le,G=ae(s.shopping_date),U=s.items.length;let V;e[15]!==s.items?(V=s.items.filter(ve),e[15]=s.items,e[16]=V):V=e[16];const W=V.length,u=W/U*100;let N,_,y,k,w,v,L,S,h,D,I,g,C,T;if(e[17]!==G||e[18]!==s.items||e[19]!==s.shopping_date||e[20]!==s.store.name||e[21]!==s.title){const l=s.items.reduce(we,0),X=s.items.filter(ke).reduce(ye,0);y=l-X,o=ge,p=je;const Y=`Belanja: ${s.title}`;e[41]!==Y?(i=t.jsx(ne,{title:Y}),e[41]=Y,e[42]=i):i=e[42],c="flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",e[43]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx("div",{className:"flex justify-end",children:t.jsxs(de,{variant:"ghost",className:"cursor-pointer flex items-center mb-2",onClick:_e,children:[t.jsx(fe,{className:"w-4 h-4"}),"Kembali"]})}),e[43]=r):r=e[43],_=xe,T="border-2",N=pe,C="pb-2",I="flex justify-between items-start";let n;e[44]!==s.store.name?(n=t.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider font-bold",children:s.store.name}),e[44]=s.store.name,e[45]=n):n=e[45];let f;e[46]!==s.title?(f=t.jsx(me,{className:"text-xl capitalize",children:s.title}),e[46]=s.title,e[47]=f):f=e[47];let q;e[48]!==G?(q=G&&t.jsx("span",{className:"bg-orange-100 text-orange-600 dark:bg-orange-800 dark:text-orange-100 text-[9px] px-1.5 py-0.5 rounded-full border border-orange-200 dark:border-orange-600 font-bold shrink-0",children:"Hari Ini"}),e[48]=G,e[49]=q):q=e[49];let Z;e[50]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx("span",{className:"font-medium",children:"Jadwal:"}),e[50]=Z):Z=e[50];let J;e[51]!==s.shopping_date?(J=new Date(s.shopping_date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),e[51]=s.shopping_date,e[52]=J):J=e[52];let K;e[53]!==J?(K=t.jsxs("p",{className:"text-[10px] md:text-xs text-slate-400 mt-1 flex items-center gap-1",children:[Z,J]}),e[53]=J,e[54]=K):K=e[54],e[55]!==n||e[56]!==f||e[57]!==q||e[58]!==K?(g=t.jsxs("div",{children:[n,f,q,K]}),e[55]=n,e[56]=f,e[57]=q,e[58]=K,e[59]=g):g=e[59],D="text-right",L="text-sm font-semibold",S=t.jsxs("span",{className:"text-green-600",title:"Sudah dibeli",children:["Rp ",X.toLocaleString("id-ID")]}),e[60]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsx("span",{className:"text-slate-400 mx-1",children:"/"}),e[60]=h):h=e[60],k="text-slate-500",w="Total estimasi",v=l.toLocaleString("id-ID"),e[17]=G,e[18]=s.items,e[19]=s.shopping_date,e[20]=s.store.name,e[21]=s.title,e[22]=o,e[23]=N,e[24]=_,e[25]=y,e[26]=k,e[27]=w,e[28]=v,e[29]=L,e[30]=S,e[31]=h,e[32]=D,e[33]=I,e[34]=g,e[35]=c,e[36]=C,e[37]=T,e[38]=r,e[39]=p,e[40]=i}else o=e[22],N=e[23],_=e[24],y=e[25],k=e[26],w=e[27],v=e[28],L=e[29],S=e[30],h=e[31],D=e[32],I=e[33],g=e[34],c=e[35],C=e[36],T=e[37],r=e[38],p=e[39],i=e[40];let B;e[61]!==k||e[62]!==w||e[63]!==v?(B=t.jsx("span",{className:k,title:w,children:v}),e[61]=k,e[62]=w,e[63]=v,e[64]=B):B=e[64];let R;e[65]!==L||e[66]!==S||e[67]!==h||e[68]!==B?(R=t.jsxs("div",{className:L,children:[S,h,B]}),e[65]=L,e[66]=S,e[67]=h,e[68]=B,e[69]=R):R=e[69];let $;e[70]!==u||e[71]!==y?($=u<100?t.jsxs("p",{className:"text-[10px] text-amber-600 font-medium",children:["Sisa: Rp ",y.toLocaleString("id-ID")," lagi"]}):t.jsxs("p",{className:"text-[10px] text-green-600 font-medium flex items-center justify-end gap-1",children:[t.jsx(te,{className:"w-2.5 h-2.5"})," Lunas / Selesai"]}),e[70]=u,e[71]=y,e[72]=$):$=e[72];let A;e[73]!==D||e[74]!==R||e[75]!==$?(A=t.jsxs("div",{className:D,children:[R,$]}),e[73]=D,e[74]=R,e[75]=$,e[76]=A):A=e[76];let H;e[77]!==I||e[78]!==g||e[79]!==A?(H=t.jsxs("div",{className:I,children:[g,A]}),e[77]=I,e[78]=g,e[79]=A,e[80]=H):H=e[80];let z;e[81]!==N||e[82]!==C||e[83]!==H?(z=t.jsx(N,{className:C,children:H}),e[81]=N,e[82]=C,e[83]=H,e[84]=z):z=e[84];const ee=`${u}%`;let E;e[85]!==ee?(E=t.jsx("div",{className:"w-full bg-secondary h-2 rounded-full overflow-hidden",children:t.jsx("div",{className:"bg-green-500 h-full transition-all duration-300",style:{width:ee}})}),e[85]=ee,e[86]=E):E=e[86];let F;e[87]!==W||e[88]!==U?(F=t.jsxs("p",{className:"text-xs mt-2 text-right font-medium",children:[W," dari ",U," barang terbeli"]}),e[87]=W,e[88]=U,e[89]=F):F=e[89];let M;e[90]!==E||e[91]!==F?(M=t.jsxs(he,{children:[E,F]}),e[90]=E,e[91]=F,e[92]=M):M=e[92],e[93]!==_||e[94]!==T||e[95]!==z||e[96]!==M?(d=t.jsxs(_,{className:T,children:[z,M]}),e[93]=_,e[94]=T,e[95]=z,e[96]=M,e[97]=d):d=e[97];let P;e[98]!==s.items?(P=s.items.map(Ne),e[98]=s.items,e[99]=P):P=e[99],e[100]!==P?(m=t.jsx("div",{className:"space-y-3",children:P}),e[100]=P,e[101]=m):m=e[101],e[102]!==u?(x=u===100&&t.jsx("div",{className:"bg-green-600 text-white dark:bg-green-800 p-4 rounded-xl text-center font-bold shadow-lg animate-bounce",children:"ðŸŽ‰ Semua Barang Terbeli!"}),e[102]=u,e[103]=x):x=e[103],b=se.length>0&&t.jsxs("div",{className:"mt-8 space-y-3 pb-10",children:[t.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest px-1",children:"Daftar Belanja Berjalan"}),t.jsx("div",{className:"flex flex-col gap-2",children:se.filter(l=>l.id!==s.id).map(l=>{const X=ae(l.shopping_date),Y=Number(l.total_bought_price||0),n=Number(l.total_estimated_price||0),f=n-Y;return t.jsxs(le,{href:re.check(l.id).url,className:"flex items-center justify-between p-3 bg-slate-100 dark:bg-slate-800 rounded-lg hover:bg-slate-200 transition-colors border border-transparent hover:border-slate-300",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-xs font-bold text-blue-600 dark:text-blue-400 uppercase",children:l.store?.name}),t.jsxs("span",{className:"font-semibold text-sm capitalize",children:[l.title,X&&t.jsx("span",{className:"ml-2 bg-orange-100 text-orange-600 dark:bg-orange-800 dark:text-orange-100 text-[9px] px-1.5 py-0.5 rounded-full border border-orange-200 dark:border-orange-600",children:"Hari Ini"})]}),t.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(l.shopping_date).toLocaleDateString("id-ID",{day:"2-digit",month:"short"})})]}),t.jsxs("div",{className:"text-right flex flex-col justify-center",children:[t.jsxs("div",{className:"text-[11px] font-bold",children:[t.jsxs("span",{className:"text-green-600",children:["Rp ",Y.toLocaleString("id-ID")]}),t.jsx("span",{className:"text-slate-400 mx-1",children:"/"}),t.jsx("span",{className:"text-slate-500",children:n.toLocaleString("id-ID")})]}),l.status!=="completed"?t.jsxs("span",{className:"text-[9px] text-amber-600 font-medium",children:["Sisa: ",f.toLocaleString("id-ID")]}):t.jsxs("span",{className:"text-[9px] text-green-600 font-medium flex items-center justify-end gap-0.5",children:[t.jsx(te,{className:"w-2 h-2"})," Lunas"]}),t.jsxs("div",{className:"flex items-center justify-end gap-1.5 mt-1",children:[t.jsxs("span",{className:"text-[9px] text-muted-foreground font-medium",children:[l.completed_items_count,"/",l.items_count," Item"]}),t.jsx("div",{className:"w-12 bg-slate-200 dark:bg-slate-700 h-1 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full ${l.status==="completed"?"bg-green-500":"bg-amber-500"}`,style:{width:`${l.completed_items_count/l.items_count*100}%`}})})]})]})]},l.id)})})]}),e[0]=s.id,e[1]=s.items,e[2]=s.shopping_date,e[3]=s.store.name,e[4]=s.title,e[5]=O,e[6]=o,e[7]=c,e[8]=r,e[9]=d,e[10]=m,e[11]=x,e[12]=b,e[13]=p,e[14]=i}else o=e[6],c=e[7],r=e[8],d=e[9],m=e[10],x=e[11],b=e[12],p=e[13],i=e[14];let j;e[104]!==c||e[105]!==r||e[106]!==d||e[107]!==m||e[108]!==x||e[109]!==b?(j=t.jsxs("div",{className:c,children:[r,d,m,x,b]}),e[104]=c,e[105]=r,e[106]=d,e[107]=m,e[108]=x,e[109]=b,e[110]=j):j=e[110];let Q;return e[111]!==o||e[112]!==j||e[113]!==p||e[114]!==i?(Q=t.jsxs(o,{breadcrumbs:p,children:[i,j]}),e[111]=o,e[112]=j,e[113]=p,e[114]=i,e[115]=Q):Q=e[115],Q}function Ne(a){return t.jsxs(le,{href:oe.toggleItem(a.id),preserveScroll:!0,className:`w-full flex items-center justify-between p-4 rounded-xl border-2 cursor-pointer transition-all ${a.is_bought?"bg-green-50 border-green-200 opacity-60 dark:bg-green-800 dark:border-green-700":"bg-white border-slate-100 shadow-sm dark:bg-slate-800 dark:border-slate-700"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[a.is_bought?t.jsx(te,{className:"w-6 h-6 text-green-600 dark:text-green-400"}):t.jsx(be,{className:"w-6 h-6 text-slate-300 dark:text-slate-600"}),t.jsxs("div",{children:[t.jsx("p",{className:`font-semibold ${a.is_bought?"line-through text-slate-500 dark:text-slate-400 capitalize text-start":"text-slate-800 dark:text-slate-200 capitalize text-start"}`,children:a.product_name_snapshot}),t.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-start",children:[a.quantity," pcs x Rp ",Number(a.price_per_unit).toLocaleString("id-ID",{maximumFractionDigits:0})]})]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("p",{className:"font-bold text-sm",children:["Rp ",Number(a.subtotal).toLocaleString("id-ID")]})})]},a.id)}function _e(){return window.history.back()}function ye(a,e){return a+Number(e.subtotal)}function ke(a){return a.is_bought}function we(a,e){return a+Number(e.subtotal)}function ve(a){return a.is_bought}function Le(a){const e=new Date,s=new Date(a);return e.getDate()===s.getDate()&&e.getMonth()===s.getMonth()&&e.getFullYear()===s.getFullYear()}export{Ee as default};
